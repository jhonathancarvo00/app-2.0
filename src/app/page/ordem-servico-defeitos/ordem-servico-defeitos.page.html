<ion-header class="os-header">
  <ion-toolbar lines="none">
    <div class="os-header-bar">
      <!-- Casinha -->
      <button class="os-back-btn" (click)="onBack()">
        <img src="../../assets/icon/topoRequest.svg" alt="Voltar" />
      </button>

      <h1 class="os-title">Ordem de Serviço - Edição</h1>

      <div class="os-header-spacer"></div>
    </div>

    <!-- Abas -->
    <ion-segment
      class="os-segment"
      [value]="segment"
      (ionChange)="changeSegment($event)"
    >
      <ion-segment-button value="defeitos">
        <ion-label>DEFEITOS/<br>CAUSAS</ion-label>
      </ion-segment-button>

      <ion-segment-button value="observacao">
        <ion-label>OBSERVAÇÃO</ion-label>
      </ion-segment-button>

      <ion-segment-button value="fotos">
        <ion-label>FOTOS</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content class="os-content">
  <div class="os-page">
    <div class="os-card">
      <!-- SWITCH ENTRE AS ABAS -->
      <ng-container [ngSwitch]="segment">
        <!-- DEFEITOS / CAUSAS -->
        <ng-container *ngSwitchCase="'defeitos'">
          <div class="os-field">
            <label class="os-label">Defeitos Constatados</label>
            <ion-textarea
              class="os-textarea"
              placeholder="Digite aqui..."
            ></ion-textarea>
          </div>

          <div class="os-field">
            <label class="os-label">Causas Prováveis</label>
            <ion-textarea
              class="os-textarea"
              placeholder="Digite aqui..."
            ></ion-textarea>
          </div>

          <div class="os-actions">
            <button
              type="button"
              class="os-primary-btn"
              (click)="confirmar()"
            >
              CONFIRMAR
            </button>
          </div>
        </ng-container>

        <!-- OBSERVAÇÃO -->
        <ng-container *ngSwitchCase="'observacao'">
          <div class="os-field">
            <label class="os-label">Observações</label>
            <ion-textarea
              class="os-textarea"
              placeholder="Digite aqui..."
            ></ion-textarea>
          </div>

          <div class="os-actions">
            <button
              type="button"
              class="os-primary-btn"
              (click)="confirmar()"
            >
              CONFIRMAR
            </button>
          </div>
        </ng-container>

        <!-- FOTOS -->
        <ng-container *ngSwitchCase="'fotos'">
          <!-- Título + botão Nova Foto -->
          <div class="os-photos-header">
            <div class="os-label">Fotos</div>

            <button
              type="button"
              class="os-new-photo-btn"
              (click)="goNovaFoto()"
            >
              Nova Foto
            </button>
          </div>

          <!-- Lista de fotos (placeholders) -->
          <div class="os-photo-box" *ngFor="let item of photos">
            <span></span>
          </div>

          <div class="os-actions">
            <button
              type="button"
              class="os-primary-btn"
              (click)="confirmar()"
            >
              CONFIRMAR
            </button>
          </div>
        </ng-container>
      </ng-container>
    </div>
  </div>
</ion-content>
