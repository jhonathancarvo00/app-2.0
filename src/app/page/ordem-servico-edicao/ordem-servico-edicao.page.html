<ion-header class="os-header">
  <ion-toolbar lines="none">
    <div class="os-header-bar">
      <!-- ícone casinha -->
      <button class="os-back-btn" (click)="onBack()">
        <img src="../../assets/icon/topoRequest.svg" alt="Voltar" />
      </button>

      <h1 class="os-title">Ordem de Serviço - Edição</h1>

      <!-- só pra equilibrar o header -->
      <div class="os-header-spacer"></div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="os-content">
  <div class="os-page">
    <div class="os-card">
      <form class="os-form">

        <!-- Número Ordem Serviço -->
<div class="os-field">
  <label class="os-label">Número Ordem Serviço</label>
  <ion-input
    class="os-input"
    type="text"
    [(ngModel)]="numeroOS">
  </ion-input>
</div>


<!-- Descrição -->
<div class="os-field">
  <label class="os-label">Descrição</label>
  <ion-input
    class="os-input"
    type="text"
    [(ngModel)]="descricao">
  </ion-input>
</div>




        <!-- Equipamento -->
        <div class="os-field">
          <label class="os-label">Equipamento</label>
          <ion-select
            class="os-input os-select-input"
            interface="popover"
            placeholder="Selecione"
            [(ngModel)]="equipamento"
            name="equipamento"
          >
            <ion-select-option
              *ngFor="let eq of equipamentosLista"
              [value]="eq.descricao || eq.nome || eq.equipamento"
            >
              {{ eq.descricao || eq.nome || eq.equipamento }}
            </ion-select-option>
          </ion-select>
        </div>

        <!-- Empreendimento -->
        <div class="os-field">
          <label class="os-label">Empreendimento</label>
          <ion-select
            class="os-input os-select-input"
            interface="popover"
            placeholder="Selecione"
            [(ngModel)]="empreendimento"
            name="empreendimento"
          >
            <ion-select-option
              *ngFor="let emp of empreendimentosLista"
              [value]="emp.descricao || emp.nome || emp.empreendimento"
            >
              {{ emp.descricao || emp.nome || emp.empreendimento }}
            </ion-select-option>
          </ion-select>
        </div>

        <!-- Datas (Abertura / Conclusão) lado a lado -->
        <div class="os-group os-group-inline">
          <!-- Data Abertura -->
          <div class="os-group-half">
            <label class="os-label">Data Abertura</label>
            <div
              class="os-date-field"
              [ngClass]="{ 'has-value': dataAbertura }"
              (click)="openCalendar($event, 'dataAbertura')"
            >
              <span class="os-date-value">
                {{ formatDate(dataAbertura) || 'dd/mm/aaaa' }}
              </span>
              <ion-icon name="calendar-outline"></ion-icon>
            </div>
          </div>

          <!-- Data Conclusão -->
          <div class="os-group-half">
            <label class="os-label">Data Conclusão</label>
            <div
              class="os-date-field"
              [ngClass]="{ 'has-value': dataConclusao }"
              (click)="openCalendar($event, 'dataConclusao')"
            >
              <span class="os-date-value">
                {{ formatDate(dataConclusao) || 'dd/mm/aaaa' }}
              </span>
              <ion-icon name="calendar-outline"></ion-icon>
            </div>
          </div>
        </div>

        <!-- Classificação -->
        <div class="os-field">
          <label class="os-label">Classificação</label>
          <ion-select
            class="os-input os-select-input"
            interface="popover"
            placeholder="Selecione"
            [(ngModel)]="classificacao"
            name="classificacao"
          >
            <ion-select-option
              *ngFor="let c of classificacoesLista"
              [value]="c.descricao || c.nome"
            >
              {{ c.descricao || c.nome }}
            </ion-select-option>
          </ion-select>
        </div>

        <!-- Tipo -->
        <div class="os-field">
          <label class="os-label">Tipo</label>
          <ion-select
            class="os-input os-select-input"
            interface="popover"
            placeholder="Selecione"
            [(ngModel)]="tipo"
            name="tipo"
          >
            <ion-select-option
              *ngFor="let t of tiposOsLista"
              [value]="t.descricao || t.nome"
            >
              {{ t.descricao || t.nome }}
            </ion-select-option>
          </ion-select>
        </div>

        <!-- Causa da Intervenção -->
        <div class="os-field">
          <label class="os-label">Causa da Intervenção</label>
          <ion-select
            class="os-input os-select-input"
            interface="popover"
            placeholder="Selecione"
            [(ngModel)]="causaIntervencao"
            name="causaIntervencao"
          >
            <ion-select-option
              *ngFor="let c of causasIntervencaoLista"
              [value]="c.descricao || c.nome"
            >
              {{ c.descricao || c.nome }}
            </ion-select-option>
          </ion-select>
        </div>

        <!-- Operador / Motorista -->
        <div class="os-field">
          <label class="os-label">Operador / Motorista</label>
          <ion-select
            class="os-input os-select-input"
            interface="popover"
            placeholder="Selecione"
            [(ngModel)]="operadorMotorista"
            name="operadorMotorista"
          >
            <ion-select-option
              *ngFor="let m of motoristasLista"
              [value]="m.nome || m.descricao"
            >
              {{ m.nome || m.descricao }}
            </ion-select-option>
          </ion-select>
        </div>

        <!-- Empreendimento da intervenção -->
        <div class="os-field">
          <label class="os-label">Empreendimento da intervenção</label>
          <ion-select
            class="os-input os-select-input"
            interface="popover"
            placeholder="Selecione"
            [(ngModel)]="empreendimentoIntervencao"
            name="empreendimentoIntervencao"
          >
            <ion-select-option
              *ngFor="let emp of empreendimentosLista"
              [value]="emp.descricao || emp.nome || emp.empreendimento"
            >
              {{ emp.descricao || emp.nome || emp.empreendimento }}
            </ion-select-option>
          </ion-select>
        </div>

        <!-- Status -->
        <div class="os-field">
          <label class="os-label">Status</label>
          <ion-select
            class="os-input os-select-input"
            interface="popover"
            placeholder="Selecione"
            [(ngModel)]="statusCodigo"
            name="statusCodigo"
          >
            <ion-select-option
              *ngFor="let st of statusLista"
              [value]="st.valor"
            >
              {{ st.descricao }}
            </ion-select-option>
          </ion-select>
        </div>

        <!-- Manutentor -->
        <div class="os-field">
          <label class="os-label">Manutentor</label>
          <ion-select
            class="os-input os-select-input"
            interface="popover"
            placeholder="Selecione"
            [(ngModel)]="manutentor"
            name="manutentor"
          >
            <ion-select-option
              *ngFor="let m of manutentoresLista"
              [value]="m.nome || m.descricao"
            >
              {{ m.nome || m.descricao }}
            </ion-select-option>
          </ion-select>
        </div>

      </form>
    </div>
  </div>

  <!-- seta embaixo à direita, fora do card -->
  <div class="os-bottom">
<button class="os-next-btn" (click)="salvarOS()">
  <ion-icon name="chevron-forward-outline"></ion-icon>
</button>


</div>

</ion-content>
